<div class="stats-zone tile is-ancestor">
  <div class="tile is-vertical">
    <div class="tile">
      <div class="tile is-parent">
        <div class="tile is-child box">
          <p class="title" *ngIf="selectedDepartment">Indicateurs de suivi de Coronavirus COVID-19
            {{selectedDepartment?.name}}</p>
          <p class="title" *ngIf="selectedRegion">Indicateurs de suivi du Coronavirus COVID-19
            {{selectedRegion?.name}}</p>
          <p class="title" *ngIf="!selectedRegion && !selectedDepartment">Indicateurs de suivi du Coronavirus COVID-19
            France</p>
          <p class="subtitle">
            <span *ngIf="isMain === true">
              Suivez l'évolution de l'épidémie de <strong>Coronavirus COVID-19</strong> en <strong>
                <ng-container *ngIf="!selectedRegion && !selectedDepartment">
                  France
                </ng-container>
                {{selectedRegion?.name}} {{selectedDepartment?.name}}
              </strong> avec les différents indicateurs de suivi : le R0, le taux d'incidence, le taux de positivité des
              tests virologiques et le taux d'occupation des lits en réanimation.<br>
            </span>
            Les données sont issues du Ministère des Solidarités et de la Santé suite au plan de déconfinement du 28
            mai 2020. Elles sont actualisées toutes les semaines.

          </p>
        </div>
      </div>
    </div>
    <div class="tile is-block-tablet is-flex-desktop">
      <div class="tile is-parent">
        <div class="tile is-child box notification" [class.is-success]="epidemicMeasures?.last.rZeroColor === 'vert'"
          [class.is-danger]="epidemicMeasures?.last.rZeroColor === 'rouge'"
          [class.orange]="epidemicMeasures?.last.rZeroColor === 'orange'">
          <p class="title tooltip-item" matTooltip="Vert : R0 entre 0 et 1 ;
              Orange : R0 entre 1 et 1,5 ;
              Rouge : R0 supérieur à 1,5">
            {{ epidemicMeasures?.last.rZero }}
          </p>
          <p class="subtitle">
            <strong>R0 - </strong>
            <span class="note">
              Ce nombre correspond au taux de reproduction du virus, cest-à-dire le nombre de personnes contaminées
              pour chaque malade.</span>
            <span class="calcul">
              Chiffre <span *ngIf="!selectedRegion && !selectedDepartment">à l'échelle nationale</span> au {{epidemicMeasures?.last.rZeroDate | date: "d MMMM yyyy":"fr-FR" }}
            </span>
          </p>
        </div>
      </div>
      <div class="tile is-parent" *ngIf="selectedZone !== 'la région'">
        <div class="tile is-child box notification"
          [class.is-success]="epidemicMeasures?.last.incidentRateColor === 'vert'"
          [class.is-danger]="epidemicMeasures?.last.incidentRateColor === 'rouge'"
          [class.orange]="epidemicMeasures?.last.incidentRateColor === 'orange'">
          <p class="title tooltip-item" matTooltip="Vert : en dessous de 10 tests positifs pour 100 000 habitants sur une semaine glissante ;
                Orange : au-delà de 10 tests positifs pour 100 000 habitants sur une semaine glissante ;
                Rouge : au-delà de 50 tests positifs pour 100 000 habitants sur une semaine glissante.">
            {{ epidemicMeasures?.last.incidentRate.toFixed(2) }}
          </p>
          <p class="subtitle">
            <strong>Taux d'incidence - </strong>
            <span class="note">
              Ce taux correspond au nombre de tests virologiques positifs pour 100 000 habitants sur une semaine
              glissante.</span>
            <span class="calcul">
              Chiffre <span *ngIf="!selectedRegion && !selectedDepartment">à l'échelle nationale</span> au {{epidemicMeasures?.last.incidentRateDate | date: "d MMMM yyyy":"fr-FR" }}
            </span>
          </p>
        </div>
      </div>
      <div class="tile is-parent" *ngIf="selectedZone !== 'la région'">
        <div class="tile is-child box notification"
          [class.is-success]="epidemicMeasures?.last.positiveRateColor === 'vert'"
          [class.is-danger]="epidemicMeasures?.last.positiveRateColor === 'rouge'"
          [class.orange]="epidemicMeasures?.last.positiveRateColor === 'orange'">
          <p class="title tooltip-item" matTooltip="Vert : taux de tests positifs entre 0 et 5% ;
                Orange : taux de tests positifs entre 5 et 10% ;
                Rouge : taux de tests positifs supérieur à 10%">
            {{ epidemicMeasures?.last.positiveRate.toFixed(2) }} %
          </p>
          <p class="subtitle">
            <strong>Taux de positivité des tests virologiques (RT-PCR) - </strong>
            <span class="note">
              Ce taux correspond au nombre de tests positifs
              sur une semaine par rapport au nombre de tests réalisés.
            </span>
            <span class="calcul">
              Chiffre <span *ngIf="!selectedRegion && !selectedDepartment">à l'échelle nationale</span> au {{epidemicMeasures?.last.positiveRateDate | date: "d MMMM yyyy":"fr-FR" }}
            </span>
          </p>
        </div>
      </div>
      <div class="tile is-parent">
        <div class="tile is-child box notification"
          [class.is-success]="epidemicMeasures?.last.reanimationCapacityColor === 'vert'"
          [class.is-danger]="epidemicMeasures?.last.reanimationCapacityColor === 'rouge'"
          [class.orange]="epidemicMeasures?.last.reanimationCapacityColor === 'orange'">
          <p class="title tooltip-item" matTooltip="Vert : taux d'occupation entre 0 et 40% ;
                Orange : taux d'occupation entre 40 et 60% ;
                Rouge : taux d'occupation supérieur à 60%.">
            {{ epidemicMeasures?.last.reanimationCapacity }} %
          </p>
          <p class="subtitle">
            <strong>Taux d'occupations des lits de réanimation/SI/SC - </strong>
            <span class="note">
              Ce taux correspond au nombre de lits de réanimation occupés par les patients
              atteints du COVID-19 sur la capacité initiale en réanimation.
            </span>
            <span class="calcul">
              Chiffre <span *ngIf="!selectedRegion && !selectedDepartment">à l'échelle nationale</span> au {{epidemicMeasures?.last.reanimationCapacityDate | date: "d MMMM yyyy":"fr-FR" }}
            </span>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
